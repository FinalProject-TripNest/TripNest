<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="data.mapper.RoomsMapperInter">
	<insert id="insertRoom" parameterType="RoomsDto"
		keyProperty="room_id">
		insert into
		ROOMS(room_id,room_name,room_price,room_min_capacity,room_max_capacity,room_address,room_service,room_detail,room_hp,room_address_detail,member_id,room_region)
		values(null,#{room_name},#{room_price},#{room_min_capacity},#{room_max_capacity},#{room_address},#{room_service},#{room_detail},#{room_hp},#{room_address_detail},#{member_id},#{room_region})
	</insert>

	<select id="getLastInsertedRoomId" resultType="int">
		SELECT
		LAST_INSERT_ID()
	</select>

	<select id="dataList" resultType="RoomsDto">
		select * from ROOMS order by
		room_id desc
	</select>

	<select id="getOneData" resultType="RoomsDto"
		parameterType="String">
		select * from ROOMS where room_id = #{room_id}
	</select>

	<select id="searchRooms" parameterType="string"
		resultType="RoomsDto">
		SELECT *
		FROM ROOMS
		WHERE room_name LIKE CONCAT('%', #{search}, '%')
		OR room_address LIKE CONCAT('%', #{search}, '%')
		ORDER BY room_id DESC
	</select>
	
	<delete id="deleteRoom" parameterType="String">
		delete from ROOMS where room_id=#{room_id}
	</delete>
	
	<select id="getRoomDataByMyid" parameterType="int" resultType="RoomsDto">
		select * from ROOMS where member_id=#{member_id}
	</select>
	
	<update id="updateRoom" parameterType="RoomsDto">
		update ROOMS set room_name=#{room_name},room_price=#{room_price},room_min_capacity=#{room_min_capacity},room_max_capacity=#{room_max_capacity},room_address=#{room_address},
		room_address_detail=#{room_address_detail},room_service=#{room_service},room_detail=#{room_detail},room_hp=#{room_hp},room_region=#{room_region} where room_id=#{room_id}
	</update>

</mapper>